<html>

<head>
  <title> video capture </title>
  	<script type="text/javascript"></script>
    
    <!-- Metro UI CSS -->
        <link href="../metro_ui_css/css/modern.css" rel="stylesheet" type="text/css">
        <link href="../metro_ui_css/css/modern-responsive.css" rel="stylesheet" type="text/css">
        <link href="../metro_ui_css/css/theme-dark.css" rel="stylesheet" type="text/css">
        </style>
        <script type="text/javascript" src="../metro_ui_css/javascript/accordion.js"></script>
        <script type="text/javascript" src="../metro_ui_css/javascript/buttonset.js"></script>
        <script type="text/javascript" src="../metro_ui_css/javascript/carousel.js"></script>
        <script type="text/javascript" src="../metro_ui_css/javascript/dropdown.js"></script>
        <script type="text/javascript" src="../metro_ui_css/javascript/input-control.js"></script>
        <script type="text/javascript" src="../metro_ui_css/javascript/pagecontrol.js"></script>
        <script type="text/javascript" src="../metro_ui_css/javascript/rating.js"></script>
        <script type="text/javascript" src="../metro_ui_css/javascript/slider.js"></script>
        <script type="text/javascript" src="../metro_ui_css/javascript/tile-drag.js"></script>
        <script type="text/javascript" src="../metro_ui_css/javascript/tile-slider.js"></script>
        
        <script type="text/javascript"	src="./three.js"></script>
        <script type="text/javascript"	src="./jquery.min.js"></script>

	<script>
	// Not showing vendor prefixes or code that works cross-browser:
		var CAN_USE_CAMERA=true;
		function hasGetUserMedia() {
		  // Note: Opera is unprefixed.
		  return (navigator.getUserMedia || navigator.webkitGetUserMedia ||
		            navigator.mozGetUserMedia || navigator.msGetUserMedia);
		}
		
		if(hasGetUserMedia()){
		}
		else{
			alert("Sorry... Ur Device does not support camera use");	
			CAN_USE_CAMERA=false;
		}
		
	</script>
 
<style type="text/css">
#apDiv1 {
	position: absolute;
	width: 100%;
	height: 100%;
	z-index: 1;
	left: 0%;
	top:  0%;
}
html, body{
	width:100%;
	height:100%;
	margin:0;
	padding:0;
	background:transparent;
}
#cam{
	width:100%;
	height:100%;
}
</style>
</head>
<body style="background:transparent;backface-visibility:hidden; background-color:#0CF">


	<div>
  <!-- video  -->
  <video id="cam" style="border-width:thick;" autoplay></video>
      </div>
      
      <!-- content -->
	  <div id="apDiv1">
    	<iframe scrolling="no" allowtransparency="true" style="background:transparent;  position:relative; border-width:0;" src="./content.html" width="90%" height="100%">	
	    </iframe>    
      </div>
      
      
<script>
	// CAN USE CAMERa
	if (CAN_USE_CAMERA==true){
  	  var video = document.getElementById('cam');

	navigator.getUserMedia = (navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia);
	window.URL = (window.URL || window.webkitURL || window.mozURL || window.msURL);
	                          
	  var onFailSoHard = function(e) {
		alert("Can not play Video");
	    console.log('Reeeejected!', e);
	  }
	
	  var onSuccess=function(stream) {
				if (video.mozSrcObject != undefined) {
                video.mozSrcObject = stream;
                } else {
                video.src = (window.URL &&               window.URL.createObjectURL(stream)) || stream;
                }
				
		  }
	
	
		if (navigator.getUserMedia) {
		  navigator.getUserMedia(
		 // {video: true, audio: true},
		  {video: true},

		   onSuccess,
		  
		  onFailSoHard);
		} else {
		  alert("Failed");
		  video.src = 'somevideo.webm'; // fallback.
		}

	}
	
	// CAN NOT USE CAMERA
	// REMOVE VIDEO
	else{
		var video=document.getElementById('cam');
		video.parentNode.removeChild(video);
	}
	</script>

        
</body>

</html>